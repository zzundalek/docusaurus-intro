"use strict";(self.webpackChunkdocusaurus_intro=self.webpackChunkdocusaurus_intro||[]).push([[111],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(n),m=o,g=c["".concat(l,".").concat(m)]||c[m]||d[m]||r;return n?a.createElement(g,i(i({ref:t},u),{},{components:n})):a.createElement(g,i({ref:t},u))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:o,i[1]=s;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2422:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var a=n(7462),o=(n(7294),n(3905));const r={sidebar_position:2,title:"Docusaurus intro"},i=void 0,s={unversionedId:"docusaurus",id:"version-1.0.0/docusaurus",title:"Docusaurus intro",description:"In our project we were searching for a documentation tool to distribute the product documentation to clients. Documentation tool had to support multiple languages (English, Japanese, ...) and documentation versioning. After some research we picked Docusaurus.",source:"@site/versioned_docs/version-1.0.0/docusaurus.md",sourceDirName:".",slug:"/docusaurus",permalink:"/docusaurus-intro/docusaurus",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/versioned_docs/version-1.0.0/docusaurus.md",tags:[],version:"1.0.0",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Docusaurus intro"},sidebar:"tutorialSidebar",previous:{title:"Hello World",permalink:"/docusaurus-intro/"}},l={},p=[{value:"Why Docusaurus?",id:"why-docusaurus",level:2},{value:"First setup",id:"first-setup",level:2},{value:"Setup Japanese support",id:"setup-japanese-support",level:2},{value:"Setup GitHub pages",id:"setup-github-pages",level:2},{value:"Setup for GitHub pages",id:"setup-for-github-pages",level:3},{value:"Setup deployment",id:"setup-deployment",level:3},{value:"Docs only mode",id:"docs-only-mode",level:2},{value:"Turn off the blog",id:"turn-off-the-blog",level:3},{value:"Turn off the pages",id:"turn-off-the-pages",level:3},{value:"Remove dead links from footer",id:"remove-dead-links-from-footer",level:3},{value:"Setup versioning",id:"setup-versioning",level:2}],u={toc:p},c="wrapper";function d(e){let{components:t,...r}=e;return(0,o.kt)(c,(0,a.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"In our project we were searching for a documentation tool to distribute the product documentation to clients. Documentation tool had to support multiple languages (English, Japanese, ...) and documentation versioning. After some research we picked ",(0,o.kt)("a",{parentName:"p",href:"https://docusaurus.io/"},"Docusaurus"),"."),(0,o.kt)("h2",{id:"why-docusaurus"},"Why Docusaurus?"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Free of cost and support GitHub pages out of the box"),(0,o.kt)("li",{parentName:"ul"},"Fast setup & wonderful documentation: ",(0,o.kt)("a",{parentName:"li",href:"https://docusaurus.io/docs#fast-track"},"Fast track"),", ",(0,o.kt)("a",{parentName:"li",href:"https://docusaurus.io/docs"},"Detailed documentation")),(0,o.kt)("li",{parentName:"ul"},"No vendor lock, documentation is easy to write using ",(0,o.kt)("a",{parentName:"li",href:"https://www.markdownguide.org/getting-started/"},"Markdown")),(0,o.kt)("li",{parentName:"ul"},"Internationalization support"),(0,o.kt)("li",{parentName:"ul"},"Documentation versioning support"),(0,o.kt)("li",{parentName:"ul"},"Dark mode support"),(0,o.kt)("li",{parentName:"ul"},"Extendable using React components")),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"https://docusaurus.io/docs#comparison-with-other-tools"},"comparison with other tools"),"."),(0,o.kt)("h2",{id:"first-setup"},"First setup"),(0,o.kt)("p",null,"Setup is described in ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:3000/docs/intro"},"documentation"),"."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Install Node.js version 16.14 or above")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Install Docusaurus"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm init docusaurus@latest docusaurus-test classic\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Run docusaurus"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd docusaurus-test\nnpm run start\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Open browser at ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:3000/"},"http://localhost:3000/")))),(0,o.kt)("h2",{id:"setup-japanese-support"},"Setup Japanese support"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Remove all pages from ",(0,o.kt)("inlineCode",{parentName:"p"},"docs/")),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"rm -r ./docs/*\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Create a new page in ",(0,o.kt)("inlineCode",{parentName:"p"},"docs/intro.md")),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-markdown"},"---\nsidebar_position: 1\ntitle: Hello World\n---\n\nHello World!\n\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"To add language select to navigation bar update ",(0,o.kt)("inlineCode",{parentName:"p"},"./docusaurus.config.js")),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"},"...\n  i18n: {\n    defaultLocale: 'en',\n-   locales: ['en'],\n+   locales: ['en', 'ja'],\n  },\n...\nthemeConfig:\n  ...\n      navbar: {\n      ...\n        items: [\n          {\n            type: 'docSidebar',\n            sidebarId: 'tutorialSidebar',\n            position: 'left',\n            label: 'Tutorial',\n          },\n+         {\n+           type: 'localeDropdown',\n+           position: 'right'\n+         },\n          ...\n        ],\n      },\n      ...\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Copy english pages to japanese"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir -p i18n/ja/docusaurus-plugin-content-docs/current\ncp -r docs/** i18n/ja/docusaurus-plugin-content-docs/current\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Translate japanese page at ",(0,o.kt)("inlineCode",{parentName:"p"},"./i18n/ja/docusaurus-plugin-content-docs/current/intro.md")),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-markdown"},"---\nsidebar_position: 1\ntitle: Hello World\n---\n\n\u30cf\u30ed\u30fc\u30fb\u30ef\u30fc\u30eb\u30c9\n\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"To test Japanese pages locally run ",(0,o.kt)("inlineCode",{parentName:"p"},"npm run start -- --locale ja")," (Only one language can be 'active' when running locally)"))),(0,o.kt)("h2",{id:"setup-github-pages"},"Setup GitHub pages"),(0,o.kt)("p",null,"Create a new GitHub repository and setup git."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"git init -b develop\ngit remote add origin https://github.com/zzundalek/docusaurus-test.git\n")),(0,o.kt)("h3",{id:"setup-for-github-pages"},"Setup for GitHub pages"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-diff"},"const config = {\n  ...\n- url: 'https://your-docusaurus-test-site.com',\n+ url: 'https://zzundalek.github.io', // https://{your_github_user_name}.github.io\n\n- baseUrl: '/',\n+ baseUrl: '/docusaurus-test/', // /{your_repository_name}/\n\n- organizationName: 'facebook',\n+ organizationName: 'zzundalek', // {your_github_user_name}\n- projectName: 'docusaurus',\n+ projectName: 'docusaurus-test', // {your_repository_name}\n\n+ trailingSlash: true,\n  ...\n}\n")),(0,o.kt)("h3",{id:"setup-deployment"},"Setup deployment"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Create a new file ",(0,o.kt)("inlineCode",{parentName:"p"},".github/workflows/deploy.yml")," for GitHub actions which will automatically build and deploy the page to ",(0,o.kt)("inlineCode",{parentName:"p"},"gh-pages")," branch."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"name: Deploy to GitHub Pages\n\non:\n  push:\n    branches:\n      - develop\n\npermissions:\n  contents: write\n\njobs:\n  deploy:\n    name: Deploy to GitHub Pages\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: 18\n          cache: npm\n\n      - name: Install dependencies\n        run: npm ci\n      - name: Build website\n        run: npm run build\n\n      - name: Deploy to GitHub Pages\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: ./build\n          user_name: github-actions[bot]\n          user_email: 41898282+github-actions[bot]@users.noreply.github.com\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Push changes to the ",(0,o.kt)("inlineCode",{parentName:"p"},"develop")," branch in GitHub. ",(0,o.kt)("inlineCode",{parentName:"p"},"gh-pages")," branch should be automatically created.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Turn on GitHub pages for the repository and click ",(0,o.kt)("inlineCode",{parentName:"p"},"Save"),".\n",(0,o.kt)("img",{alt:"Turn on GitHub pages",src:n(4787).Z,width:"1280",height:"765"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Check the ",(0,o.kt)("inlineCode",{parentName:"p"},"GitHub pages")," at ",(0,o.kt)("inlineCode",{parentName:"p"},"https://{your_github_user_name}.github.io/{your_github_repository_name}/")))),(0,o.kt)("h2",{id:"docs-only-mode"},"Docs only mode"),(0,o.kt)("h3",{id:"turn-off-the-blog"},"Turn off the blog"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Disable blog at ",(0,o.kt)("inlineCode",{parentName:"p"},"./docusaurus.config.js")),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"},"...\npresets: [\n  [\n+ blog: false        \n- blog: {\n- ...\n- }\n  ],\n],\n...\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Remove blog from the navigation bar"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"},"...\nthemeConfig:\n  navbar: {\n    items: [\n      ...\n-     {to: '/blog', label: 'Blog', position: 'left'},\n      ...\n    ]\n  }\n...\n")))),(0,o.kt)("h3",{id:"turn-off-the-pages"},"Turn off the pages"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Remove page files from ",(0,o.kt)("inlineCode",{parentName:"p"},"./pages")),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"rm -r ./src/pages/*\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Set docs as default page"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"},"...\npresets: [\n  {\n    ...\n    docs: {\n+     routeBasePath: '/',\n      ...\n    },\n    ...\n  },\n],\n...\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Update ",(0,o.kt)("inlineCode",{parentName:"p"},"./docs/intro.md")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"./i18n/ja/docusaurus-plugin-content-docs/current/intro.md")," to set it as default page"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"},"  ---\n  sidebar_position: 1\n  title: Hello World\n+ slug: /\n  ---\n  ...\n")))),(0,o.kt)("h3",{id:"remove-dead-links-from-footer"},"Remove dead links from footer"),(0,o.kt)("p",null,"We've disabled the blog and pages, but there are still active links to it. Docusaurus build will check the links and fails to build if there is any broken link."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-diff"},"footer: {\n  style: 'dark',\n  links: [\n    {\n      title: 'Docs',\n      items: [\n        {\n          label: 'Tutorial',\n-         to: '/docs/intro',\n+         to: '/',\n        },\n      ],\n    },\n...\n    {\n      title: 'More',\n      items: [\n-       {\n-         label: 'Blog',\n-         to: '/blog',\n-       },\n        {\n          label: 'GitHub',\n          href: 'https://github.com/facebook/docusaurus',\n        },\n      ],\n    },\n  ],\n  copyright: `Copyright \xa9 ${new Date().getFullYear()} My Project, Inc. Built with Docusaurus.`,\n  },\n")),(0,o.kt)("h2",{id:"setup-versioning"},"Setup versioning"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Create a new tagged version from current version"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run docusaurus docs:version 1.0.0\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Add version select to navigation bar"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"},"themeConfig:\n...\n  navbar: {\n    title: 'My Site',\n    logo: {\n      alt: 'My Site Logo',\n      src: 'img/logo.svg',\n    },\n    items: [\n      ...\n+      {\n+       type: 'docsVersionDropdown',\n+       position: 'right',\n+       dropdownActiveClassDisabled: true,\n+      },\n      ...\n    ],\n  }\n\n")))))}d.isMDXComponent=!0},4787:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/github_pages_on-5d7162b13b0cfa088d74110f7294aaa9.jpeg"}}]);